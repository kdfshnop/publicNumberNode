/*++----------------------------------------------------------------------------------------------------------------------------------------------------------------------
1. 项目名称：Aggregator标准框架
2. 文件名：src -> system -> libraries -> benchmark.js
3. 作者：zhaohuagang@lifang.com
4. 备注：系统工具库 -> 基准测试类
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/

class Benchmark {
    constructor() {
        this.markers = {} ;
    }
    /*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    做一个标记点
    @name：标记点名称
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
    mark(name) {        
        this.markers[name] = (new Date()).getTime() ;
    }
    /*++-----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    计算两点之间的时间间隔
    @startMarker：开始标记名称
    @endMarker： 结束标记名称
    @decimals：计算出的结果单位是秒，需要保留几位小数
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
    elapsedTime({ startMarker , endMarker , decimals = 3 }) {
        if( ! startMarker || ! endMarker) return 0 ;
        let remainer = (this.markers[endMarker] - this.markers[startMarker]) / 1000 ;
        return remainer.toFixed(decimals) ;
    }
}

export default Benchmark ;
